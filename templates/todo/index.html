{% extends "base.html" %}

{% block content %}
  <h1>
    TODO list
    <a href="{% url 'todo:task-create' %}" class="btn btn-primary float-end">Add task</a>
  </h1>
  <br>
  {% for task in tasks %}
    <h5>
      {{ task.content }}

      {% if task.completed %}
        <span class="text-success">Done</span>
        {% else %}
        <span class="text-danger">Not done</span>
      {% endif %}

      {% if task.completed %}
        <a href="{% url 'todo:toggle-task-completion' pk=task.id %}" class="btn btn-secondary float-end">Undo</a>
      {% else %}
        <a href="{% url 'todo:toggle-task-completion' pk=task.id %}" class="btn btn-success float-end">Complete</a>
      {% endif %}


    </h5>
    <div>
      Created: {{ task.created }}
      {% if task.deadline %}
        <span class="text-danger">Deadline: {{ task.deadline }}</span>
      {% endif %}
    </div>
    <div class="text-secondary">
      Tags:
      {% for tag in task.tags.all %}
      {{ tag.name }}
      {% endfor %}

      <a href="{% url 'todo:task-update' pk=task.id %}" class="text-decoration-none">Update</a>
      <a href="{% url 'todo:task-delete' pk=task.id %}" class="text-decoration-none">Delete</a>
    </div>
    <hr>
  {% endfor %}

{% endblock %}
